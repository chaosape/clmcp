
struct lmcp_object {
    uint32 type; // in every class with inherited subclasses. this can be changed to an enum if need be.
}

struct S2 {
     struct S1 super;
     ...
}

every struct eventually "inherits" from lmcp_object. because of this, given any struct s, one may infer its type by ((*base)&s)->type.

s2 to s1:
S2* s2 = ...;
S1* s1 = (S1*) s2;

s1 to s2:
S1* s1 = ... ;
if (s1 -> type == LMCP_S1_TYPE)
    s2 = (S2*) s1;


